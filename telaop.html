<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />

  <script type="text/javascript" src="http://static.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/nipplejs/0.7.3/nipplejs.js"></script>
  <link rel="stylesheet" href="manubar.css">
  <link rel="stylesheet" href="style.css">
</head>
  <body>
    
        </div>
         </div>
         <div class="page">
            <header tabindex="0"><h2><span style ="color: #ff9000;">SorLab 
              <span style ="color: aliceblue;"> web
              </span></span></h2></header>
            <div id="nav-container">
              <div class="bg"></div>
              <div class="button-bar" tabindex="0">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </div>
              <div id="nav-content" tabindex="0">
                <ul>
                  <li><a href="#0">Connect</a></li>
                  <li><a href="#0">navigation</a></li>
                  <li><a href="#0">telaop</a></li>
                </ul>
              </div>
            
            </div>
            <p>Connection status: <span id="status"></span></p>
              <p>Last message on /txt_msg: <span id="msg"></span></p>
              <script type="text/javascript" src="telaop.js">
              </script>
              <div id="joystick">
                <div id="control"></div>
              </div>
              
            </div>
            <script>
              let joystick = document.getElementById("joystick")
              let control = document.getElementById("control")
              let evnet = false
              let startX = 0
              let startY = 0
              document.addEventListener("mousedown",function(e){
                
                if(e['screenY']>=300){
                  console.log(e)
                  evnet = true
                  joystick.style.display = "block"
                  joystick.style.top = (e['clientY']-90)+"px"
                  joystick.style.bottom = "0px"
                  joystick.style.right = "0px"
                  joystick.style.left = (e['clientX']-90)+"px"
                  control.style.top="40px"
                  control.style.left="40px"
                  startX = (e['clientX']-90)
                  startY = (e['clientY']-90)
                }
              })
              document.addEventListener("mouseup",function(e){
                
                evnet = false
                control.style.top="40px"
                control.style.left="40px"
                setTimeout(function(){
                  joystick.style.display="none"
                },5+ 00)
              })
              joystick.addEventListener("mouseup",function(e){
                
                evnet = false
                control.style.top="40px"
                control.style.left="40px"
                setTimeout(function(){
                  joystick.style.display="none"
                },500)
              })
              control.addEventListener("mouseup",function(e){
                evnet = false
                control.style.top="40px"
                control.style.left="40px"
                setTimeout(function(){
                  joystick.style.display="none"
                },500)
              })
              document.addEventListener("mousemove",function(e){
                 if(evnet){
                  console.log(e['clientY'],e['clientX'])
                  if(((e['clientY']-startY)-60<100 && (e['clientX']-startX)-60<100) || ((e['clientY']-startY)-60>-100 && (e['clientX']-startX)-60>-100 )){
                    control.style.top=(e['clientY']-startY)-60+"px"
                    control.style.left=(e['clientX']-startX)-60+"px"
                  }
                  
                  
                  console.log(e['clientY'],evnet)
                }
                
              })
            </script>
 
</body>

</html>